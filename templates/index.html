<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FraudGuard Pro - AI-Powered Payment Security</title>
    <!----->
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: #333;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
      }

      .header {
        text-align: center;
        margin-bottom: 40px;
        color: white;
      }

      .header h1 {
        font-size: 3rem;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }

      .header p {
        font-size: 1.2rem;
        opacity: 0.9;
        margin-bottom: 20px;
      }

      .status-bar {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        padding: 15px 25px;
        margin-bottom: 30px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      }

      .status-item {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .status-indicator {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #51cf66;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      .main-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-bottom: 40px;
      }

      .card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .card h2 {
        color: #2d3748;
        margin-bottom: 20px;
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
      }

      label {
        display: block;
        margin-bottom: 5px;
        font-weight: 600;
        color: #4a5568;
      }

      input,
      select {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid #e2e8f0;
        border-radius: 12px;
        font-size: 16px;
        transition: all 0.3s ease;
        background: white;
      }

      input:focus,
      select:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      .btn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 12px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        width: 100%;
        margin-top: 10px;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
      }

      .btn:active {
        transform: translateY(0);
      }

      .btn-secondary {
        background: linear-gradient(135deg, #20bf6b, #26a085);
        margin-top: 10px;
      }

      .btn-warning {
        background: linear-gradient(135deg, #ffa726, #ff9800);
        margin-top: 10px;
      }

      .result-card {
        margin-top: 20px;
        padding: 20px;
        border-radius: 12px;
        text-align: center;
        font-weight: 600;
        font-size: 1.1rem;
      }

      .fraud-detected {
        background: linear-gradient(135deg, #ff6b6b, #ee5a52);
        color: white;
        animation: alertPulse 2s infinite;
      }

      .suspicious {
        background: linear-gradient(135deg, #ffd43b, #fab005);
        color: #333;
      }

      .legitimate {
        background: linear-gradient(135deg, #51cf66, #40c057);
        color: white;
      }

      @keyframes alertPulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 30px;
      }

      .stat-card {
        background: rgba(255, 255, 255, 0.9);
        padding: 20px;
        border-radius: 15px;
        text-align: center;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
      }

      .stat-card:hover {
        transform: translateY(-5px);
      }

      .stat-number {
        font-size: 2.5rem;
        font-weight: 700;
        color: #667eea;
        display: block;
      }

      .stat-label {
        color: #666;
        font-size: 0.9rem;
        margin-top: 5px;
      }

      .loading {
        display: none;
        text-align: center;
        margin: 20px 0;
      }

      .spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #667eea;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .risk-meter {
        width: 100%;
        height: 20px;
        background: #e2e8f0;
        border-radius: 10px;
        overflow: hidden;
        margin: 15px 0;
      }

      .risk-fill {
        height: 100%;
        border-radius: 10px;
        transition: width 0.8s ease-in-out;
      }

      .transaction-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 20px;
      }

      .detail-item {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 10px;
        border-left: 4px solid #667eea;
      }

      .detail-label {
        font-size: 0.8rem;
        color: #666;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .detail-value {
        font-size: 1.1rem;
        font-weight: 600;
        color: #333;
        margin-top: 5px;
      }

      .alert {
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
        font-weight: 600;
      }

      .alert-info {
        background: #d1ecf1;
        border: 1px solid #bee5eb;
        color: #0c5460;
      }

      .alert-warning {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        color: #856404;
      }

      .model-info {
        background: rgba(255, 255, 255, 0.9);
        padding: 25px;
        border-radius: 15px;
        margin-top: 30px;
      }

      @media (max-width: 768px) {
        .main-grid {
          grid-template-columns: 1fr;
        }

        .form-row {
          grid-template-columns: 1fr;
        }

        .header h1 {
          font-size: 2rem;
        }

        .status-bar {
          flex-direction: column;
          gap: 10px;
        }
      }

      .api-info {
        background: rgba(255, 255, 255, 0.1);
        padding: 20px;
        border-radius: 15px;
        margin-top: 20px;
        color: white;
      }

      .endpoint {
        background: rgba(0, 0, 0, 0.2);
        padding: 10px;
        border-radius: 8px;
        margin: 10px 0;
        font-family: "Courier New", monospace;
        font-size: 0.9rem;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üõ°Ô∏è FraudGuard</h1>
        <p>Advanced AI-Powered Real-Time Payment Fraud Detection Platform</p>

        <div class="status-bar">
          <div class="status-item">
            <div class="status-indicator" id="systemStatus"></div>
            <span id="statusText">System Initializing...</span>
          </div>
          <div class="status-item">
            <span>üß† Model: <span id="modelType">Loading...</span></span>
          </div>
          <div class="status-item">
            <span>‚ö° API: <span id="apiStatus">Connecting...</span></span>
          </div>
        </div>
      </div>

      <div class="main-grid">
        <div class="card">
          <h2>üîç Transaction Analysis</h2>
          <form id="fraudDetectionForm">
            <div class="form-row">
              <div class="form-group">
                <label for="transactionType">Transaction Type</label>
                <select id="transactionType" required>
                  <option value="">Select Type</option>
                  <option value="PAYMENT">Payment</option>
                  <option value="TRANSFER">Transfer</option>
                  <option value="CASH_OUT">Cash Out</option>
                  <option value="DEBIT">Debit</option>
                  <option value="CASH_IN">Cash In</option>
                </select>
              </div>
              <div class="form-group">
                <label for="amount">Transaction Amount ($)</label>
                <input
                  type="number"
                  id="amount"
                  placeholder="Enter amount"
                  step="0.01"
                  min="0"
                  required
                />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="oldBalanceOrig">Origin Old Balance ($)</label>
                <input
                  type="number"
                  id="oldBalanceOrig"
                  placeholder="Previous balance"
                  step="0.01"
                  min="0"
                  required
                />
              </div>
              <div class="form-group">
                <label for="newBalanceOrig">Origin New Balance ($)</label>
                <input
                  type="number"
                  id="newBalanceOrig"
                  placeholder="Current balance"
                  step="0.01"
                  min="0"
                  required
                />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="oldBalanceDest">Destination Old Balance ($)</label>
                <input
                  type="number"
                  id="oldBalanceDest"
                  placeholder="Recipient's old balance"
                  step="0.01"
                  min="0"
                  required
                />
              </div>
              <div class="form-group">
                <label for="newBalanceDest">Destination New Balance ($)</label>
                <input
                  type="number"
                  id="newBalanceDest"
                  placeholder="Recipient's new balance"
                  step="0.01"
                  min="0"
                  required
                />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="isFlaggedFraud">System Flagged</label>
                <select id="isFlaggedFraud" required>
                  <option value="0">Not Flagged</option>
                  <option value="1">Flagged by System</option>
                </select>
              </div>
              <div class="form-group">
                <label for="step">Transaction Step</label>
                <input
                  type="number"
                  id="step"
                  placeholder="Time step"
                  min="1"
                  max="743"
                  value="1"
                  required
                />
              </div>
            </div>

            <button type="submit" class="btn">üîç Analyze Transaction</button>
            <button
              type="button"
              class="btn btn-secondary"
              onclick="loadSampleData('high_risk')"
            >
              üìù Load High Risk Sample
            </button>
            <button
              type="button"
              class="btn btn-secondary"
              onclick="loadSampleData('low_risk')"
            >
              üìù Load Low Risk Sample
            </button>
            <button
              type="button"
              class="btn btn-warning"
              onclick="loadSampleData('suspicious')"
            >
              üìù Load Suspicious Sample
            </button>
          </form>

          <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Analyzing with Deep Neural Network...</p>
          </div>

          <div id="result"></div>
        </div>

        <div class="card">
          <h2>üìä Real-Time Analytics</h2>
          <div class="stats-grid">
            <div class="stat-card">
              <span class="stat-number" id="totalTransactions">0</span>
              <div class="stat-label">Transactions Analyzed</div>
            </div>
            <div class="stat-card">
              <span class="stat-number" id="fraudDetected">0</span>
              <div class="stat-label">Fraud Detected</div>
            </div>
            <div class="stat-card">
              <span class="stat-number" id="accuracyRate">98.70%</span>
              <div class="stat-label">Model Accuracy</div>
            </div>
            <div class="stat-card">
              <span class="stat-number" id="riskScore">Low</span>
              <div class="stat-label">Current Risk Level</div>
            </div>
          </div>

          <div class="model-info">
            <h3>üß† AI Model Information</h3>
            <div class="transaction-details">
              <div class="detail-item">
                <div class="detail-label">Architecture</div>
                <div class="detail-value" id="modelArchitecture">
                  Deep Neural Network
                </div>
              </div>
              <div class="detail-item">
                <div class="detail-label">Layers</div>
                <div class="detail-value">128‚Üí64‚Üí32‚Üí1</div>
              </div>
              <div class="detail-item">
                <div class="detail-label">Activation</div>
                <div class="detail-value">ReLU + Sigmoid</div>
              </div>
              <div class="detail-item">
                <div class="detail-label">Test Accuracy</div>
                <div class="detail-value">98.70%</div>
              </div>
              <div class="detail-item">
                <div class="detail-label">Fraud Recall</div>
                <div class="detail-value">99%</div>
              </div>
              <div class="detail-item">
                <div class="detail-label">Uptime</div>
                <div class="detail-value" id="systemUptime">0h</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="api-info">
        <h3>üîå API Endpoints</h3>
        <div class="endpoint">
          POST /api/predict - Single transaction analysis
        </div>
        <div class="endpoint">
          POST /api/batch-predict - Batch transaction analysis
        </div>
        <div class="endpoint">GET /api/health - System health check</div>
        <div class="endpoint">GET /api/stats - Real-time statistics</div>
        <div class="endpoint">GET /api/test-transaction - Sample test data</div>
      </div>

      <div class="alert alert-warning">
        <strong>‚ö†Ô∏è Important:</strong> This is a demonstration system based on
        research. For production use, implement additional security measures,
        compliance checks, and regulatory approvals.
      </div>
    </div>

    <script>
      // API Configuration
      const API_BASE = "/.netlify/functions/app"; // Same origin

      // Application state
      let appStats = {
        totalTransactions: 0,
        fraudDetected: 0,
        startTime: new Date(),
      };

      // Initialize application
      document.addEventListener("DOMContentLoaded", function () {
        initializeApp();
        startStatsUpdater();
      });

      async function initializeApp() {
        try {
          // Check system health
          await checkSystemHealth();

          // Load model info
          await loadModelInfo();

          // Update status
          updateSystemStatus("healthy", "System Online");
        } catch (error) {
          console.error("Initialization error:", error);
          updateSystemStatus("error", "System Error");
        }
      }

      async function checkSystemHealth() {
        try {
          const response = await fetch(`${API_BASE}/api/health`);
          const data = await response.json();

          if (data.status === "healthy") {
            document.getElementById("apiStatus").textContent = "Connected";
            return data;
          } else {
            throw new Error("System unhealthy");
          }
        } catch (error) {
          document.getElementById("apiStatus").textContent = "Disconnected";
          throw error;
        }
      }

      async function loadModelInfo() {
        try {
          const response = await fetch(`${API_BASE}/api/model-info`);
          const data = await response.json();

          if (data.success) {
            const modelInfo = data.model_info;
            document.getElementById("modelType").textContent =
              modelInfo.model_type || "Unknown";
            document.getElementById("modelArchitecture").textContent =
              modelInfo.model_type || "Deep Neural Network";
          }
        } catch (error) {
          console.error("Error loading model info:", error);
          document.getElementById("modelType").textContent = "Error";
        }
      }

      function updateSystemStatus(status, message) {
        const indicator = document.getElementById("systemStatus");
        const text = document.getElementById("statusText");

        indicator.className = "status-indicator";
        text.textContent = message;

        if (status === "healthy") {
          indicator.style.background = "#51cf66";
        } else if (status === "warning") {
          indicator.style.background = "#ffd43b";
        } else {
          indicator.style.background = "#ff6b6b";
        }
      }

      // Form submission handler
      document
        .getElementById("fraudDetectionForm")
        .addEventListener("submit", async function (e) {
          e.preventDefault();

          // Show loading
          document.getElementById("loading").style.display = "block";
          document.getElementById("result").innerHTML = "";

          try {
            // Collect form data
            const formData = {
              type: document.getElementById("transactionType").value,
              amount: parseFloat(document.getElementById("amount").value),
              oldbalanceOrg: parseFloat(
                document.getElementById("oldBalanceOrig").value
              ),
              newbalanceOrig: parseFloat(
                document.getElementById("newBalanceOrig").value
              ),
              oldbalanceDest: parseFloat(
                document.getElementById("oldBalanceDest").value
              ),
              newbalanceDest: parseFloat(
                document.getElementById("newBalanceDest").value
              ),
              isFlaggedFraud: parseInt(
                document.getElementById("isFlaggedFraud").value
              ),
              step: parseInt(document.getElementById("step").value),
            };

            // Validate form data
            if (!validateFormData(formData)) {
              document.getElementById("loading").style.display = "none";
              return;
            }

            // Make API call
            const response = await fetch(`${API_BASE}/api/predict`, {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(formData),
            });

            const data = await response.json();

            if (data.success) {
              displayResults(formData, data);
              updateLocalStats(data.prediction.classification);
            } else {
              throw new Error(data.error || "Prediction failed");
            }
          } catch (error) {
            console.error("Prediction error:", error);
            displayError(error.message);
          } finally {
            document.getElementById("loading").style.display = "none";
          }
        });

      function validateFormData(data) {
        // Basic validation
        if (data.amount <= 0) {
          alert("Transaction amount must be positive");
          return false;
        }

        if (data.amount > 10000000) {
          alert("Transaction amount exceeds maximum limit");
          return false;
        }

        // Balance consistency warning
        if (data.type === "TRANSFER" || data.type === "PAYMENT") {
          const expectedNewBalance = data.oldbalanceOrg - data.amount;
          if (
            Math.abs(data.newbalanceOrig - expectedNewBalance) >
            data.amount * 0.01
          ) {
            if (
              !confirm(
                "Balance calculations seem inconsistent. Continue anyway?"
              )
            ) {
              return false;
            }
          }
        }

        return true;
      }

      function displayResults(transaction, apiResponse) {
        const prediction = apiResponse.prediction;
        const resultDiv = document.getElementById("result");

        let resultClass = "";
        let resultIcon = "";
        let resultMessage = "";
        let riskLevel = "";

        switch (prediction.classification) {
          case "FRAUD":
            resultClass = "fraud-detected";
            resultIcon = "üö®";
            resultMessage = "FRAUD DETECTED";
            riskLevel = "Critical Risk";
            break;
          case "SUSPICIOUS":
            resultClass = "suspicious";
            resultIcon = "‚ö†Ô∏è";
            resultMessage = "SUSPICIOUS TRANSACTION";
            riskLevel = "High Risk";
            break;
          case "LEGITIMATE":
            resultClass = "legitimate";
            resultIcon = "‚úÖ";
            resultMessage = "LEGITIMATE TRANSACTION";
            riskLevel = "Low Risk";
            break;
          default:
            resultClass = "suspicious";
            resultIcon = "‚ùì";
            resultMessage = "UNKNOWN CLASSIFICATION";
            riskLevel = "Unknown";
        }

        const riskPercentage = (prediction.probability * 100).toFixed(1);
        const confidencePercentage = (prediction.confidence * 100).toFixed(1);

        resultDiv.innerHTML = `
                <div class="result-card ${resultClass}">
                    <div style="font-size: 2rem; margin-bottom: 10px;">${resultIcon}</div>
                    <div>${resultMessage}</div>
                    <div style="margin-top: 10px; font-size: 0.9rem;">
                        Risk Score: ${riskPercentage}% | Confidence: ${confidencePercentage}%
                    </div>
                    <div style="margin-top: 5px; font-size: 0.8rem;">
                        Transaction ID: ${apiResponse.transaction_id}
                    </div>
                </div>
                
                <div class="transaction-details">
                    <div class="detail-item">
                        <div class="detail-label">Risk Level</div>
                        <div class="detail-value">${riskLevel}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Amount</div>
                        <div class="detail-value">${transaction.amount.toLocaleString()}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Type</div>
                        <div class="detail-value">${transaction.type}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Confidence</div>
                        <div class="detail-value">${confidencePercentage}%</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Processing Time</div>
                        <div class="detail-value">${new Date(
                          apiResponse.timestamp
                        ).toLocaleTimeString()}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Model Used</div>
                        <div class="detail-value">${
                          prediction.model_used || "Neural Network"
                        }</div>
                    </div>
                </div>
                
                <div style="margin-top: 15px;">
                    <label style="font-size: 0.9rem; color: #666;">Risk Assessment</label>
                    <div class="risk-meter">
                        <div class="risk-fill" style="width: ${riskPercentage}%; background: ${getRiskColor(
          prediction.probability
        )};"></div>
                    </div>
                </div>
            `;
      }

      function displayError(errorMessage) {
        const resultDiv = document.getElementById("result");
        resultDiv.innerHTML = `
                <div class="result-card" style="background: #ff6b6b; color: white;">
                    <div style="font-size: 2rem; margin-bottom: 10px;">‚ùå</div>
                    <div>ERROR</div>
                    <div style="margin-top: 10px; font-size: 0.9rem;">
                        ${errorMessage}
                    </div>
                </div>
            `;
      }

      function getRiskColor(probability) {
        if (probability >= 0.5)
          return "linear-gradient(90deg, #ff6b6b, #ee5a52)";
        if (probability >= 0.3)
          return "linear-gradient(90deg, #ffd43b, #fab005)";
        return "linear-gradient(90deg, #51cf66, #40c057)";
      }

      function updateLocalStats(classification) {
        appStats.totalTransactions++;
        if (classification === "FRAUD") {
          appStats.fraudDetected++;
        }

        document.getElementById("totalTransactions").textContent =
          appStats.totalTransactions;
        document.getElementById("fraudDetected").textContent =
          appStats.fraudDetected;

        // Update risk level
        const fraudRate =
          appStats.fraudDetected / Math.max(1, appStats.totalTransactions);
        let riskLevel = "Low";
        if (fraudRate > 0.1) riskLevel = "High";
        else if (fraudRate > 0.05) riskLevel = "Medium";

        document.getElementById("riskScore").textContent = riskLevel;
      }

      async function loadSampleData(type) {
        try {
          const response = await fetch(`${API_BASE}/api/test-transaction`);
          const data = await response.json();

          if (data.success) {
            let sampleData;

            switch (type) {
              case "high_risk":
                sampleData = data.sample_transactions[0].data; // High Risk Transfer
                break;
              case "low_risk":
                sampleData = data.sample_transactions[1].data; // Low Risk Payment
                break;
              case "suspicious":
                sampleData = data.sample_transactions[2].data; // Suspicious Cash Out
                break;
              default:
                sampleData = data.sample_transactions[0].data;
            }

            // Fill form with sample data
            document.getElementById("transactionType").value = sampleData.type;
            document.getElementById("amount").value = sampleData.amount;
            document.getElementById("oldBalanceOrig").value =
              sampleData.oldbalanceOrg;
            document.getElementById("newBalanceOrig").value =
              sampleData.newbalanceOrig;
            document.getElementById("oldBalanceDest").value =
              sampleData.oldbalanceDest;
            document.getElementById("newBalanceDest").value =
              sampleData.newbalanceDest;
            document.getElementById("isFlaggedFraud").value =
              sampleData.isFlaggedFraud;
            document.getElementById("step").value = sampleData.step;
          } else {
            throw new Error("Failed to load sample data");
          }
        } catch (error) {
          console.error("Error loading sample data:", error);
          alert("Failed to load sample data: " + error.message);
        }
      }

      async function updateStats() {
        try {
          const response = await fetch(`${API_BASE}/api/stats`);
          const data = await response.json();

          if (data.success) {
            const stats = data.statistics;
            document.getElementById("totalTransactions").textContent =
              stats.total_predictions;
            document.getElementById("fraudDetected").textContent =
              stats.fraud_detected;
            document.getElementById(
              "systemUptime"
            ).textContent = `${stats.uptime_hours}h`;

            // Update risk level based on fraud rate
            if (stats.fraud_rate_percent > 10) {
              document.getElementById("riskScore").textContent = "High";
            } else if (stats.fraud_rate_percent > 5) {
              document.getElementById("riskScore").textContent = "Medium";
            } else {
              document.getElementById("riskScore").textContent = "Low";
            }
          }
        } catch (error) {
          console.error("Error updating stats:", error);
        }
      }

      function startStatsUpdater() {
        // Update stats every 30 seconds
        updateStats();
        setInterval(updateStats, 30000);

        // Update uptime every second
        setInterval(() => {
          const now = new Date();
          const uptime =
            Math.floor(((now - appStats.startTime) / 1000 / 3600) * 100) / 100;
          document.getElementById("systemUptime").textContent = `${uptime}h`;
        }, 1000);
      }
    </script>
  </body>
</html>
